## dht

- dht网络
  - 在udp网络上通信，使用了jech写的bt dht库
  - 该库实现的是bt协议的dht网络
  - 通信消息
    - ping：ping节点，看是否存活
    - find_node：寻找节点
    - get_peers：寻找拥有块的节点
    - announce_peer：宣布在当前节点拥有块
- 文件传输网络
  - 在tcp网络里进行
  - 通信消息
    - upload：上传文件
    - download：下载文件
- client程序负责与守护进程通信完成任务
  - 守护进程在server管道监听请求，client进程另建一个管道接收回复
  - 通信消息
    - find：向守护进程中的dht网络请求发起一个find_node消息
    - get_peers：向守护进程中的dht网络请求发起一个get_peers消息
    - node：守护进程返回client节点ip和端口
- dht网络和文件传输网络组成一个守护进程运行在节点后台
- 守护进程中的dht网络需要与client程序交互，而文件传输网络不用
- 用户通过启动client程序进行文件上传和下载